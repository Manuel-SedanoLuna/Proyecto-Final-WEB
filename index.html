<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>PECI lab</title>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
  <link rel="stylesheet" href="CSS/estilos.css">
  <link rel="icon" type="image/png" href="IMAGES/logo.png">
</head>

<body>
  <header>
    <nav class="navbar navbar-expand-lg navbar-light" style="background-color: #2070adfd;">
      <a class="navbar-brand" href="index.html">
        <img src="IMAGES/logo.png" width="60" height="30" class="d-inline-block align-top" alt="logo PECI">
        <span class="navbar-brand-text inline-block text-white
                    text-wrap">Proyectos Y Estudios Sobre
          Contaminación Industrial S.A. de C.V.</span>
      </a>
      <button class="navbar-toggler w-100" type="button" data-toggle="collapse" data-target="#navbarNav"
        aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav" style="background-color: #2070adc9;">
        <ul class="navbar-nav ml-auto">
          <li class="nav-item active">
            <a class="nav-link" href="index.html">Inicio</a>
          </li>
          <li class="nav-item">
            <a class="nav-link text-white" href="PAGES/Servicios.html">Servicios</a>
          </li>
          <li class="nav-item">
            <a class="nav-link text-white" href="PAGES/Nosotros.html">Nosotros</a>
          </li>
          <li class="nav-item">
            <a class="nav-link text-white" href="PAGES/Contacto.html">Contacto</a>
          </li>
        </ul>
      </div>
    </nav>
  </header>
  <main>
    <div class="container-fluid p-0">
      <div class="row">
        <div class="col-lg-7">
          <div class="banner-image">
            <div class="overlay"></div>
          </div>
          <div class="content">
            <h1>¿Necesitas análisis de agua para tu empresa?</h1>
            <p>En PECILAB contamos con la acreditación de la entidad mexicana de acreditación (EMA) y la aprobación de
              la Comisión Nacional del Agua (CONAGUA) para ofrecerte servicios de análisis de agua residual, cruda y
              tratada. ¡Agenda una cita hoy mismo!</p>
          </div>
        </div>
        <div class="col-lg-5">
          <div class="appointment-form">
            <h2 class="text-danger">¡Obtén tu cotización gratis!</h2>
            <form method="post" action="PHP/Agendar.php">
              <div class="alert alert-danger" role="alert" id="error-message" style="display: none;"></div>
              <div class="alert alert-success" role="alert" id="success-message" style="display: none;"></div>
              <div class="mb-3">
                <label for="name">Nombre:</label>
                <input type="text" class="form-control" id="nombre" name="nombre" placeholder="Introduzca su nombre">
              </div>
              <div class="mb-3">
                <label for="email">Correo:</label>
                <input type="email" class="form-control" id="email" name="email" placeholder="Introduzca su correo">
              </div>
              <div class="mb-3">
                <label for="phone">Número de Contacto:</label>
                <input type="tel" class="form-control" id="telefono" name="telefono"
                  placeholder="Introduzca su número de teléfono o celular">
              </div>
              <div class="mb-3">
                <label for="fecha" class="form-label">Seleccione una Fecha</label>
                <input type="date" class="form-control" id="fecha" name="fecha" required>
              </div>
              <div class="mb-3">
                <label for="hora" class="form-label">Seleccione un Horario</label>
                <input type="time" class="form-control" id="hora" name="hora" required>
              </div>
              <button type="submit" class="btn btn-primary">Agendar Cita</button>
            </form>
          </div>
        </div>
      </div>
    </div>
  </main>

  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper-base.min.js"
    crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" crossorigin="anonymous"></script>
  <!--Script para mostrar de 30 en 30 mins-->
  <script>
    // Obtener el elemento de entrada de hora
    var horaInput = document.getElementById('hora');

    // Establecer la hora mínima y máxima permitida
    horaInput.min = '09:00';
    horaInput.max = '18:00';

    // Obtener la hora actual
    var now = new Date();
    var currentHour = now.getHours();
    var currentMinute = now.getMinutes();

    // Calcular el siguiente múltiplo de 30 minutos a partir de la hora actual
    var next30Minute = Math.ceil(currentMinute / 30) * 30;
    if (next30Minute === 60) {
      next30Minute = 0;
      currentHour += 1;
    }

    // Formatear la hora y los minutos como cadenas de dos dígitos
    var formattedHour = ('0' + currentHour).slice(-2);
    var formattedMinute = ('0' + next30Minute).slice(-2);

    // Establecer el valor inicial del campo de entrada de hora al siguiente múltiplo de 30 minutos
    horaInput.value = formattedHour + ':' + formattedMinute;

    // Establecer los intervalos de tiempo en incrementos de 30 minutos
    var interval = 30;
    horaInput.step = interval.toString().padStart(2, '0');

    // Función para verificar si un horario está dentro del rango permitido
    function isValidTime(hour, minute) {
      var startHour = 9; // Hora de inicio permitida (9 AM)
      var endHour = 18; // Hora de finalización permitida (6 PM)

      return hour >= startHour && hour <= endHour;
    }

    // Función para verificar y corregir automáticamente el horario seleccionado
    function validateTime() {
      var selectedTime = horaInput.value.split(':');
      var selectedHour = parseInt(selectedTime[0], 10);
      var selectedMinute = parseInt(selectedTime[1], 10);

      if (!isValidTime(selectedHour, selectedMinute)) {
        // El horario seleccionado está fuera del rango permitido, corregir automáticamente al horario más cercano dentro del rango
        var correctedHour = Math.max(Math.min(selectedHour, 18), 9); // Ajustar al rango permitido
        var correctedMinute = selectedMinute < 30 ? 0 : 30; // Establecer los minutos al siguiente múltiplo de 30

        // Formatear la hora y los minutos corregidos como cadenas de dos dígitos
        var formattedCorrectedHour = ('0' + correctedHour).slice(-2);
        var formattedCorrectedMinute = ('0' + correctedMinute).slice(-2);

        // Establecer el valor corregido en el campo de entrada de hora
        horaInput.value = formattedCorrectedHour + ':' + formattedCorrectedMinute;
      }
    }

    // Verificar y corregir automáticamente el horario seleccionado cuando se cambia el valor del campo de entrada de hora
    horaInput.addEventListener('change', validateTime);
  </script>

  <!--Script para mostrar mensaje de success o de error para agendar-->
  <script>
    // Obtener los elementos de los mensajes de error y éxito
    var errorDiv = document.getElementById('error-message');
    var successDiv = document.getElementById('success-message');

    // Obtener el mensaje de error o éxito de la URL
    var urlParams = new URLSearchParams(window.location.search);
    var errorMessage = urlParams.get('error');
    var successMessage = urlParams.get('success');

    // Mostrar el mensaje de error o éxito si existen
    if (errorMessage) {
      errorDiv.textContent = errorMessage;
      errorDiv.style.display = 'block';
    }
    if (successMessage) {
      successDiv.textContent = successMessage;
      successDiv.style.display = 'block';
    }
  </script>
</body>
<footer class="bg-dark">
  <div class="row">
    <div class="col-lg-4">
      <h3 class="text-light">Redes Sociales</h3>
      <div class="row justify-content-center mb-4">
        <div class="col-lg-3 col-md-3 d-flex flex-column align-items-center">
          <a href="#" class="text-light">
            <div class="d-flex flex-column align-items-center social-icon">
              <img src="IMAGES/facebook.png" alt="Facebook" class="social img-fluid">
              <span class="social-name">Facebook</span>
            </div>
          </a>
        </div>
        <div class="col-lg-3 col-md-3 d-flex flex-column align-items-center">
          <a href="#" class="text-light">
            <div class="d-flex flex-column align-items-center social-icon">
              <img src="IMAGES/twitter.png" alt="Twitter" class="social img-fluid">
              <span class="social-name">Twitter</span>
            </div>
          </a>
        </div>
        <div class="col-lg-3 col-md-3 d-flex flex-column align-items-center">
          <a href="#" class="text-light">
            <div class="d-flex flex-column align-items-center social-ico">
              <img src="IMAGES/instagram.png" alt="Instagram" class="social img-fluid">
              <span class="social-name">Instagram</span>
            </div>
          </a>
        </div>
      </div>
    </div>

    <div class="col-lg-8">
      <h3 class="text-light">PECI LAB</h3>
      <div class="row justify-content-end align-items-center mb-4">
        <div class="col-lg-3 col-md-3 mx-2 d-flex justify-content-center">
          <div class="d-flex flex-column align-items-center">
            <p class="text-light">TELÉFONO: 81-8372-63-82</p>
            <p class="text-light">EMAILS:</p>
            <p class="text-light">info@pecilab.com</p>
            <p class="text-light">cotizacion@pecilab.com</p>
          </div>
        </div>


        <div class="col-lg-3 col-md-3 mx-2 d-flex justify-content-center">
          <a href="#" class="text-light">Términos y condiciones de uso</a>
        </div>
        <div class="col-lg-3 col-md-3 mx-2 d-flex justify-content-center">
          <a href="#" class="text-light">Aviso de privacidad</a>
        </div>
        <div class="col-lg-3 col-md-3 mx-2 d-flex justify-content-center">
          <div class="d-flex flex-column align-items-center social-icon">
            <img src="IMAGES/logo.png" alt="PECILAB Logo" class="logo">
          </div>
        </div>
      </div>
    </div>
  </div>
</footer>

</html>